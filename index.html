<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flower Express</title>
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter –¥–ª—è –º–∏–Ω–∏–º–∞–ª–∏–∑–º–∞ -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // –ü–∞–ª–∏—Ç—Ä–∞ –≤ —Å—Ç–∏–ª–µ Gold Apple
                        ga: {
                            lime: '#DAF52C', // –§–∏—Ä–º–µ–Ω–Ω—ã–π –ª–∞–π–º
                            black: '#000000',
                            gray: '#F6F6F6',
                            darkGray: '#1A1A1A',
                            text: '#000000'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'], // –¢–æ–ª—å–∫–æ sans-serif –¥–ª—è —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏
                    },
                    borderRadius: {
                        'xl': '1rem',
                        '2xl': '1.5rem',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #ffffff;
            color: #000000;
            -webkit-tap-highlight-color: transparent;
        }
        /* –°–∫—Ä—ã–≤–∞–µ–º —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        ::-webkit-scrollbar { width: 0; }
        
        /* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ —Ç–µ–Ω–∏ –¥–ª—è –ø–ª–æ—Å–∫–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ */
        .card-flat {
            border: 1px solid #f0f0f0;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        .fade-in { animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .slide-in { animation: slideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes slideIn { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å—Ç–∏–ª—å –∫–Ω–æ–ø–æ–∫ */
        .btn-primary {
            background-color: #000;
            color: #fff;
            transition: all 0.2s;
        }
        .btn-primary:active {
            transform: scale(0.98);
            background-color: #333;
        }
        .btn-lime {
            background-color: #DAF52C;
            color: #000;
            font-weight: 600;
        }
    </style>
</head>
<body class="font-sans">

    <!-- HEADER -->
    <header class="fixed top-0 w-full z-40 bg-white/90 backdrop-blur-md border-b border-gray-100 px-5 h-16 flex items-center justify-between">
        <div class="flex items-center gap-2 cursor-pointer" onclick="goHome()">
            <!-- –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ª–æ–≥–æ -->
            <div class="w-8 h-8 bg-ga-lime rounded-full flex items-center justify-center font-black text-xs tracking-tighter">FE</div>
            <span class="font-bold text-lg tracking-tight uppercase">Flower Express</span>
        </div>
        <button id="backBtn" class="hidden text-black font-medium text-sm hover:text-gray-600 transition-colors" onclick="goHome()">
            <i class="fas fa-arrow-left mr-1"></i> –ù–∞–∑–∞–¥
        </button>
    </header>

    <!-- MAIN CONTAINER -->
    <main class="pt-24 pb-24 px-5 min-h-screen">
        
        <!-- VIEW: HOME (CATEGORIES) -->
        <div id="view-home" class="fade-in">
            <!-- Hero Banner -->
            <div class="relative w-full h-[400px] rounded-none overflow-hidden mb-10 group">
                <img src="https://images.unsplash.com/photo-1596627786277-c990ee307077?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105">
                <div class="absolute inset-0 bg-black/10 flex flex-col justify-end p-6">
                    <div class="bg-white/90 backdrop-blur-sm p-4 max-w-[80%]">
                        <p class="text-xs font-bold uppercase tracking-widest mb-1 text-gray-500">New Collection</p>
                        <h1 class="text-3xl font-black leading-none uppercase">–≠—Å—Ç–µ—Ç–∏–∫–∞<br>—á—É–≤—Å—Ç–≤</h1>
                    </div>
                </div>
            </div>

            <!-- Categories Grid -->
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold uppercase tracking-wide">–ö–∞—Ç–∞–ª–æ–≥</h2>
                <span class="text-xs text-gray-400 font-medium">4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</span>
            </div>
            
            <div class="grid grid-cols-2 gap-3">
                <!-- –•–∏—Ç—ã -->
                <div onclick="showCategory('hits')" class="bg-ga-gray p-5 h-40 flex flex-col justify-between cursor-pointer hover:bg-gray-200 transition-colors">
                    <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center text-sm shadow-sm">üî•</div>
                    <div>
                        <h3 class="font-bold uppercase text-sm leading-tight">–•–∏—Ç—ã<br>–Ω–µ–¥–µ–ª–∏</h3>
                    </div>
                </div>
                <!-- –ú–æ–Ω–æ–±—É–∫–µ—Ç—ã -->
                <div onclick="showCategory('mono')" class="bg-ga-gray p-5 h-40 flex flex-col justify-between cursor-pointer hover:bg-gray-200 transition-colors">
                    <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center text-sm shadow-sm">üåπ</div>
                    <div>
                        <h3 class="font-bold uppercase text-sm leading-tight">–ú–æ–Ω–æ<br>–±—É–∫–µ—Ç—ã</h3>
                    </div>
                </div>
                <!-- –ê–≤—Ç–æ—Ä—Å–∫–∏–µ -->
                <div onclick="showCategory('author')" class="bg-ga-gray p-5 h-40 flex flex-col justify-between cursor-pointer hover:bg-gray-200 transition-colors">
                    <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center text-sm shadow-sm">üé®</div>
                    <div>
                        <h3 class="font-bold uppercase text-sm leading-tight">–ê–≤—Ç–æ—Ä—Å–∫–∏–µ<br>—Å–±–æ—Ä–∫–∏</h3>
                    </div>
                </div>
                <!-- –í –∫–æ—Ä–æ–±–∫–∞—Ö -->
                <div onclick="showCategory('box')" class="bg-ga-gray p-5 h-40 flex flex-col justify-between cursor-pointer hover:bg-gray-200 transition-colors">
                    <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center text-sm shadow-sm">üéÅ</div>
                    <div>
                        <h3 class="font-bold uppercase text-sm leading-tight">–í –∫–æ—Ä–æ–±–∫–∞—Ö<br>& –∫–æ—Ä–∑–∏–Ω–∞—Ö</h3>
                    </div>
                </div>
            </div>

            <!-- Custom Budget Button -->
            <div onclick="openCustomOrder()" class="mt-4 bg-black text-white p-5 flex items-center justify-between cursor-pointer active:scale-[0.99] transition-transform">
                <div class="flex items-center gap-4">
                    <div class="w-10 h-10 bg-ga-lime rounded-full flex items-center justify-center text-black">
                        <i class="fas fa-magic"></i>
                    </div>
                    <div>
                        <h3 class="font-bold uppercase text-sm">–°–≤–æ–π –±—é–¥–∂–µ—Ç</h3>
                        <p class="text-xs text-gray-400">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥–±–æ—Ä</p>
                    </div>
                </div>
                <i class="fas fa-arrow-right text-ga-lime"></i>
            </div>
        </div>

        <!-- VIEW: PRODUCT LIST -->
        <div id="view-products" class="hidden slide-in">
            <h2 id="category-title" class="text-2xl font-black uppercase mb-6 break-words leading-tight">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</h2>
            <div id="products-grid" class="grid grid-cols-2 gap-x-4 gap-y-8">
                <!-- Products injected by JS -->
            </div>
        </div>

    </main>

    <!-- MODAL: PRODUCT DETAILS -->
    <div id="product-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-white" onclick="">
            <!-- Close Button -->
            <button onclick="closeModal('product-modal')" class="absolute top-4 right-4 z-10 w-10 h-10 bg-black/5 rounded-full flex items-center justify-center">
                <i class="fas fa-times text-black"></i>
            </button>

            <!-- Image -->
            <div class="h-[55%] w-full bg-gray-100">
                <img id="modal-img" src="" class="w-full h-full object-cover">
            </div>

            <!-- Content -->
            <div class="p-6 h-[45%] flex flex-col justify-between">
                <div>
                    <div class="flex justify-between items-start mb-2">
                        <h2 id="modal-title" class="text-xl font-black uppercase leading-tight pr-4">–ù–∞–∑–≤–∞–Ω–∏–µ</h2>
                        <span id="modal-price" class="bg-ga-lime text-black px-3 py-1 text-sm font-bold whitespace-nowrap">0 ‚Ç∏</span>
                    </div>
                    <p id="modal-desc" class="text-gray-500 text-sm leading-relaxed mt-4">–û–ø–∏—Å–∞–Ω–∏–µ</p>
                </div>
                
                <button onclick="startOrderProcess()" class="w-full btn-primary py-4 font-bold uppercase tracking-widest text-sm">
                    –í –∫–æ—Ä–∑–∏–Ω—É
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL: ORDER FORM (Steps) -->
    <div id="order-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm flex items-end sm:items-center justify-center">
            <div class="bg-white w-full sm:max-w-md sm:rounded-2xl rounded-t-3xl p-6 relative animate-[slideIn_0.3s]">
                <button onclick="closeModal('order-modal')" class="absolute top-4 right-4 text-gray-400 p-2"><i class="fas fa-times"></i></button>
                
                <!-- Progress Line -->
                <div class="flex gap-1 mb-8">
                    <div id="p-1" class="h-1 flex-1 bg-black"></div>
                    <div id="p-2" class="h-1 flex-1 bg-gray-200"></div>
                    <div id="p-3" class="h-1 flex-1 bg-gray-200"></div>
                </div>

                <!-- Step 1: Date -->
                <div id="step-1" class="step-content">
                    <h3 class="text-xl font-bold uppercase mb-6">–î–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è</h3>
                    <div class="space-y-3">
                        <button onclick="setOrderData('date', '–°–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º'); nextStep(2)" class="w-full border border-gray-200 p-4 text-left hover:border-black hover:bg-gray-50 font-medium transition-all group">
                            <span class="text-gray-400 group-hover:text-black mr-2">‚óè</span> –°–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º
                        </button>
                        <button onclick="setOrderData('date', '–ó–∞–≤—Ç—Ä–∞'); nextStep(2)" class="w-full border border-gray-200 p-4 text-left hover:border-black hover:bg-gray-50 font-medium transition-all group">
                            <span class="text-gray-400 group-hover:text-black mr-2">‚óè</span> –ó–∞–≤—Ç—Ä–∞
                        </button>
                        <div class="relative">
                            <input type="date" id="custom-date" onchange="setOrderData('date', this.value); nextStep(2)" class="w-full border border-gray-200 p-4 text-gray-900 focus:outline-none focus:border-black bg-transparent uppercase text-sm">
                            <div class="absolute right-4 top-4 pointer-events-none text-gray-400"><i class="fas fa-calendar"></i></div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Delivery -->
                <div id="step-2" class="step-content hidden">
                    <h3 class="text-xl font-bold uppercase mb-6">–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="setOrderData('type', '–î–æ—Å—Ç–∞–≤–∫–∞'); nextStep(3)" class="border border-gray-200 p-6 flex flex-col items-center gap-3 hover:bg-ga-lime hover:border-ga-lime hover:text-black transition-all">
                            <i class="fas fa-truck text-2xl"></i>
                            <span class="font-bold text-xs uppercase tracking-wider">–î–æ—Å—Ç–∞–≤–∫–∞</span>
                        </button>
                        <button onclick="setOrderData('type', '–°–∞–º–æ–≤—ã–≤–æ–∑'); nextStep(3)" class="border border-gray-200 p-6 flex flex-col items-center gap-3 hover:bg-black hover:border-black hover:text-white transition-all">
                            <i class="fas fa-store text-2xl"></i>
                            <span class="font-bold text-xs uppercase tracking-wider">–°–∞–º–æ–≤—ã–≤–æ–∑</span>
                        </button>
                    </div>
                </div>

                <!-- Step 3: Contacts -->
                <div id="step-3" class="step-content hidden">
                    <h3 class="text-xl font-bold uppercase mb-2">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                    <p class="text-gray-400 text-xs mb-6">–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</p>
                    
                    <div class="space-y-4">
                        <div class="group">
                            <label class="text-xs font-bold uppercase text-gray-400 group-focus-within:text-black">–í–∞—à–µ –∏–º—è</label>
                            <input type="text" id="client-name" class="w-full border-b border-gray-200 py-3 text-lg focus:outline-none focus:border-black transition-colors rounded-none">
                        </div>
                        <div class="group">
                            <label class="text-xs font-bold uppercase text-gray-400 group-focus-within:text-black">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                            <input type="tel" id="client-phone" placeholder="+7..." class="w-full border-b border-gray-200 py-3 text-lg focus:outline-none focus:border-black transition-colors rounded-none">
                        </div>
                        
                        <button id="submit-btn" onclick="submitOrder()" class="w-full bg-ga-lime text-black font-bold py-4 mt-6 uppercase tracking-widest text-sm hover:bg-opacity-90 transition-opacity">
                            –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        // –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ –∏–∑ –ø–∞–ø–∫–∏, –∑–∞–º–µ–Ω–∏—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ 'img/photo.jpg'
        const products = [
            // –•–∏—Ç—ã
            { id: 1, cat: 'hits', name: '–ê–≤—Ç–æ—Ä—Å–∫–∏–π "–ù–µ–∂–Ω–æ—Å—Ç—å"', price: '25 000', img: 'https://images.unsplash.com/photo-1562690868-60bbe7293e94?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–ú–∏–∫—Å –∏–∑ –∫—É—Å—Ç–æ–≤—ã—Ö —Ä–æ–∑ –∏ —ç–≤–∫–∞–ª–∏–ø—Ç–∞. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Å–≤–∏–¥–∞–Ω–∏—è –∏–ª–∏ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è.' },
            { id: 2, cat: 'hits', name: '–ü–∏–æ–Ω–æ–≤–∏–¥–Ω–∞—è –ª—é–±–æ–≤—å', price: '32 000', img: 'https://images.unsplash.com/photo-1525310072745-f49212b5ac6d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–†–æ—Å–∫–æ—à–Ω—ã–µ –ø–∏–æ–Ω–æ–≤–∏–¥–Ω—ã–µ —Ä–æ–∑—ã —Å –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–º –∞—Ä–æ–º–∞—Ç–æ–º.' },
            
            // –ú–æ–Ω–æ
            { id: 3, cat: 'mono', name: '25 –ë–µ–ª—ã—Ö —Ä–æ–∑', price: '18 000', img: 'https://images.unsplash.com/photo-1597826368522-9f458885a039?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–ö–ª–∞—Å—Å–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞. –°–≤–µ–∂–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞ –∏–∑ –≠–∫–≤–∞–¥–æ—Ä–∞.' },
            { id: 4, cat: 'mono', name: '–û—Ö–∞–ø–∫–∞ –¢—é–ª—å–ø–∞–Ω–æ–≤', price: '15 000', img: 'https://images.unsplash.com/photo-1520013511871-337d80099d0e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–í–µ—Å–µ–Ω–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤ –ª—é–±–æ–π –¥–µ–Ω—å –≥–æ–¥–∞. 35 —à—Ç—É–∫.' },

            // –ê–≤—Ç–æ—Ä—Å–∫–∏–µ
            { id: 5, cat: 'author', name: '–ë—É–∫–µ—Ç "–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ"', price: '45 000', img: 'https://images.unsplash.com/photo-1563241527-3004b7be025b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–°–ª–æ–∂–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ü–≤–µ—Ç–∞–º–∏. –î–ª—è —Ç–µ—Ö, –∫–æ–≥–æ —Å–ª–æ–∂–Ω–æ —É–¥–∏–≤–∏—Ç—å.' },

            // –ö–æ—Ä–æ–±–∫–∏
            { id: 6, cat: 'box', name: '–®–ª—è–ø–Ω–∞—è –∫–æ—Ä–æ–±–∫–∞ S', price: '22 000', img: 'https://images.unsplash.com/photo-1589133887019-27083a216262?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–°—Ç–∏–ª—å–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–∞ –æ–∞–∑–∏—Å–µ. –ù–µ —Ç—Ä–µ–±—É–µ—Ç –≤–∞–∑—ã, —É–¥–æ–±–Ω–æ –ø—Ä–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ.' }
        ];

        const catTitles = {
            'hits': '–•–∏—Ç—ã –Ω–µ–¥–µ–ª–∏',
            'mono': '–ú–æ–Ω–æ–±—É–∫–µ—Ç—ã',
            'author': '–ê–≤—Ç–æ—Ä—Å–∫–∏–µ —Å–±–æ—Ä–∫–∏',
            'box': '–ö–æ—Ä–æ–±–∫–∏ & –ö–æ—Ä–∑–∏–Ω—ã'
        };

        // --- STATE ---
        let currentOrder = {
            product: null,
            date: '',
            type: '',
            name: '',
            phone: ''
        };

        // --- NAVIGATION ---
        function goHome() {
            document.getElementById('view-products').classList.add('hidden');
            document.getElementById('view-home').classList.remove('hidden');
            document.getElementById('backBtn').classList.add('hidden');
        }

        function showCategory(catKey) {
            document.getElementById('view-home').classList.add('hidden');
            document.getElementById('view-products').classList.remove('hidden');
            document.getElementById('backBtn').classList.remove('hidden');
            document.getElementById('category-title').innerText = catTitles[catKey];

            // Render products
            const container = document.getElementById('products-grid');
            container.innerHTML = '';
            
            const filtered = products.filter(p => p.cat === catKey);
            
            filtered.forEach(p => {
                const html = `
                    <div onclick="openProduct(${p.id})" class="cursor-pointer group">
                        <div class="h-56 overflow-hidden bg-gray-100 mb-3 relative">
                            <img src="${p.img}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                             <div class="absolute top-2 left-2 bg-white px-2 py-1 text-[10px] font-bold uppercase tracking-wider">New</div>
                        </div>
                        <div>
                            <p class="text-xs text-gray-400 mb-1 uppercase tracking-wide">Flower Express</p>
                            <h3 class="font-bold text-sm uppercase mb-1 leading-tight">${p.name}</h3>
                            <p class="font-medium text-sm text-black">${p.price} ‚Ç∏</p>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        function openCustomOrder() {
            currentOrder.product = "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ (–ë—é–¥–∂–µ—Ç)";
            openOrderModal();
        }

        // --- PRODUCT MODAL ---
        function openProduct(id) {
            const product = products.find(p => p.id === id);
            currentOrder.product = product.name; // Save for order
            
            document.getElementById('modal-img').src = product.img;
            document.getElementById('modal-title').innerText = product.name;
            document.getElementById('modal-price').innerText = `${product.price} ‚Ç∏`;
            document.getElementById('modal-desc').innerText = product.desc;
            
            document.getElementById('product-modal').classList.remove('hidden');
        }

        function closeModal(id) {
            document.getElementById(id).classList.add('hidden');
        }

        function startOrderProcess() {
            closeModal('product-modal');
            openOrderModal();
        }

        // --- ORDER FLOW ---
        function openOrderModal() {
            document.getElementById('order-modal').classList.remove('hidden');
            // Reset to step 1
            document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
            document.getElementById('step-1').classList.remove('hidden');
            updateProgress(1);
        }

        function nextStep(stepNum) {
            setTimeout(() => {
                document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
                document.getElementById(`step-${stepNum}`).classList.remove('hidden');
                updateProgress(stepNum);
            }, 150);
        }

        function updateProgress(step) {
            // Reset colors
            [1, 2, 3].forEach(i => {
                const bar = document.getElementById(`p-${i}`);
                if (i <= step) bar.classList.replace('bg-gray-200', 'bg-black');
                else bar.classList.replace('bg-black', 'bg-gray-200');
            });
        }

        function setOrderData(key, value) {
            currentOrder[key] = value;
        }

        // --- TELEGRAM SENDING ---
        // 1. –í–°–¢–ê–í–¨–¢–ï –¢–û–ö–ï–ù –ë–û–¢–ê –°–Æ–î–ê
        const BOT_TOKEN = "8446307985:AAFhTfPJApaYjRfM3vZtDtbvTJ-izd-Bf7k"; 
        // 2. –í–°–¢–ê–í–¨–¢–ï –í–ê–® ID –°–Æ–î–ê (—É–∑–Ω–∞—Ç—å –≤ @userinfobot)
        const CHAT_ID = "1025557118";

        async function submitOrder() {
            const name = document.getElementById('client-name').value;
            const phone = document.getElementById('client-phone').value;

            if(!name || !phone) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω");
                return;
            }

            const btn = document.getElementById('submit-btn');
            const originalText = btn.innerText;
            btn.innerHTML = '–û–±—Ä–∞–±–æ—Ç–∫–∞...';

            const orderId = Math.floor(Math.random() * 1000) + 100; // Fake ID
            
            // Format for admin
            const msg = `üñ§ –ó–ê–ö–ê–ó #${orderId}\n\n‚ñ™Ô∏è –¢–æ–≤–∞—Ä: ${currentOrder.product}\n‚ñ™Ô∏è –î–∞—Ç–∞: ${currentOrder.date}\n‚ñ™Ô∏è –¢–∏–ø: ${currentOrder.type}\n\nüë§ ${name}\nüì± ${phone}`;

            try {
                const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: msg
                    })
                });

                if (response.ok) {
                    btn.classList.replace('bg-ga-lime', 'bg-black');
                    btn.classList.replace('text-black', 'text-white');
                    btn.innerHTML = '–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç';
                    setTimeout(() => {
                        window.location.reload(); // Reset app
                    }, 2000);
                } else {
                    throw new Error('API Error');
                }
            } catch (e) {
                alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–∫–µ–Ω–∞.');
                btn.innerHTML = originalText;
            }
        }

        // Telegram App Init
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
        
        // –¶–≤–µ—Ç —Ö–µ–¥–µ—Ä–∞ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º
        tg.setHeaderColor('#ffffff');
        tg.setBackgroundColor('#ffffff');
    </script>
</body>
</html>
