<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flower Express</title>
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        rose: {
                            50: '#fff1f2',
                            100: '#ffe4e6',
                            300: '#fda4af',
                            500: '#f43f5e',
                            900: '#881337',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #fff1f2; /* rose-50 */
            -webkit-tap-highlight-color: transparent;
        }
        /* –°–∫—Ä—ã–≤–∞–µ–º —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        ::-webkit-scrollbar { width: 0; }
        
        .card-shadow {
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ */
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .slide-in { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
    </style>
</head>
<body class="text-gray-800">

    <!-- HEADER -->
    <header class="fixed top-0 w-full z-40 bg-white/80 backdrop-blur-md border-b border-rose-100 px-4 h-14 flex items-center justify-between">
        <div class="flex items-center gap-2" onclick="goHome()">
            <i class="fas fa-spa text-rose-500 text-xl"></i>
            <span class="font-serif font-bold text-lg tracking-wide text-rose-900">Flower Express</span>
        </div>
        <button id="backBtn" class="hidden text-rose-500 font-medium text-sm" onclick="goHome()">
            <i class="fas fa-arrow-left mr-1"></i> –ù–∞–∑–∞–¥
        </button>
    </header>

    <!-- MAIN CONTAINER -->
    <main class="pt-20 pb-24 px-4 min-h-screen">
        
        <!-- VIEW: HOME (CATEGORIES) -->
        <div id="view-home" class="fade-in">
            <!-- Hero Banner -->
            <div class="relative w-full h-48 rounded-2xl overflow-hidden mb-8 card-shadow">
                <img src="https://images.unsplash.com/photo-1490750967868-58cb75065ed2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-gradient-to-t from-rose-900/60 to-transparent flex items-end p-5">
                    <div>
                        <p class="text-white/90 text-xs font-medium uppercase tracking-wider mb-1">Flower Express</p>
                        <h1 class="text-white font-serif text-2xl font-bold leading-tight">–î–∞—Ä–∏—Ç–µ —ç–º–æ—Ü–∏–∏,<br>–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ü–≤–µ—Ç—ã</h1>
                    </div>
                </div>
            </div>

            <!-- Categories Grid -->
            <h2 class="font-serif text-xl font-bold text-rose-900 mb-4">–í–∏—Ç—Ä–∏–Ω–∞</h2>
            <div class="grid grid-cols-2 gap-3">
                <!-- –•–∏—Ç—ã -->
                <div onclick="showCategory('hits')" class="bg-white p-4 rounded-xl card-shadow active:scale-95 transition-transform cursor-pointer">
                    <div class="w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center mb-3 text-rose-500 text-lg">üî•</div>
                    <h3 class="font-bold text-gray-800">–•–∏—Ç—ã –Ω–µ–¥–µ–ª–∏</h3>
                    <p class="text-xs text-gray-500">–ß–∞—â–µ –≤—Å–µ–≥–æ –±–µ—Ä—É—Ç</p>
                </div>
                <!-- –ú–æ–Ω–æ–±—É–∫–µ—Ç—ã -->
                <div onclick="showCategory('mono')" class="bg-white p-4 rounded-xl card-shadow active:scale-95 transition-transform cursor-pointer">
                    <div class="w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center mb-3 text-rose-500 text-lg">üåπ</div>
                    <h3 class="font-bold text-gray-800">–ú–æ–Ω–æ–±—É–∫–µ—Ç—ã</h3>
                    <p class="text-xs text-gray-500">–†–æ–∑—ã, –ø–∏–æ–Ω—ã</p>
                </div>
                <!-- –ê–≤—Ç–æ—Ä—Å–∫–∏–µ -->
                <div onclick="showCategory('author')" class="bg-white p-4 rounded-xl card-shadow active:scale-95 transition-transform cursor-pointer">
                    <div class="w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center mb-3 text-rose-500 text-lg">üé®</div>
                    <h3 class="font-bold text-gray-800">–ê–≤—Ç–æ—Ä—Å–∫–∏–µ</h3>
                    <p class="text-xs text-gray-500">–°–ª–æ–∂–Ω—ã–µ —Å–±–æ—Ä–∫–∏</p>
                </div>
                <!-- –í –∫–æ—Ä–æ–±–∫–∞—Ö -->
                <div onclick="showCategory('box')" class="bg-white p-4 rounded-xl card-shadow active:scale-95 transition-transform cursor-pointer">
                    <div class="w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center mb-3 text-rose-500 text-lg">üéÅ</div>
                    <h3 class="font-bold text-gray-800">–í –∫–æ—Ä–æ–±–∫–∞—Ö</h3>
                    <p class="text-xs text-gray-500">–£–¥–æ–±–Ω–æ –≤–µ–∑—Ç–∏</p>
                </div>
            </div>

            <!-- Custom Budget Button -->
            <div onclick="openCustomOrder()" class="mt-6 bg-rose-900 text-white p-4 rounded-xl flex items-center justify-between card-shadow active:opacity-90 cursor-pointer">
                <div class="flex items-center gap-3">
                    <i class="fas fa-magic text-xl text-rose-300"></i>
                    <div>
                        <h3 class="font-bold text-sm">–°–æ–±—Ä–∞—Ç—å –Ω–∞ –º–æ–π –±—é–¥–∂–µ—Ç</h3>
                        <p class="text-xs text-rose-200">–§–ª–æ—Ä–∏—Å—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã</p>
                    </div>
                </div>
                <i class="fas fa-chevron-right text-sm"></i>
            </div>
        </div>

        <!-- VIEW: PRODUCT LIST -->
        <div id="view-products" class="hidden slide-in">
            <h2 id="category-title" class="font-serif text-xl font-bold text-rose-900 mb-4">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</h2>
            <div id="products-grid" class="grid grid-cols-1 gap-4">
                <!-- Products injected by JS -->
            </div>
        </div>

    </main>

    <!-- MODAL: PRODUCT DETAILS -->
    <div id="product-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeModal('product-modal')"></div>
        <div class="absolute bottom-0 w-full bg-white rounded-t-3xl p-6 min-h-[70vh] flex flex-col slide-in">
            <div class="w-12 h-1 bg-gray-200 rounded-full mx-auto mb-6"></div>
            
            <img id="modal-img" src="" class="w-full h-64 object-cover rounded-2xl mb-4 shadow-md">
            
            <div class="flex justify-between items-start mb-2">
                <h2 id="modal-title" class="font-serif text-2xl font-bold text-gray-900">–ù–∞–∑–≤–∞–Ω–∏–µ</h2>
                <span id="modal-price" class="bg-rose-100 text-rose-800 px-3 py-1 rounded-full font-bold text-sm">0 ‚Ç∏</span>
            </div>
            
            <p id="modal-desc" class="text-gray-500 leading-relaxed mb-8 flex-grow">–û–ø–∏—Å–∞–Ω–∏–µ</p>
            
            <button onclick="startOrderProcess()" class="w-full bg-rose-600 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-rose-700 active:scale-[0.98] transition-all">
                –•–æ—á—É —Ç–∞–∫–æ–π / –£–∑–Ω–∞—Ç—å –Ω–∞–ª–∏—á–∏–µ
            </button>
        </div>
    </div>

    <!-- MODAL: ORDER FORM (Steps) -->
    <div id="order-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-rose-50/90 backdrop-blur-md flex items-center justify-center p-4">
            <div class="bg-white w-full max-w-sm rounded-2xl shadow-2xl p-6 relative">
                <button onclick="closeModal('order-modal')" class="absolute top-4 right-4 text-gray-400 p-2"><i class="fas fa-times"></i></button>
                
                <!-- Step 1: Date -->
                <div id="step-1" class="step-content">
                    <h3 class="font-serif text-xl font-bold text-center mb-6">–ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –±—É–∫–µ—Ç?</h3>
                    <div class="space-y-3">
                        <button onclick="setOrderData('date', '–°–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º'); nextStep(2)" class="w-full border border-rose-200 p-4 rounded-xl text-left hover:bg-rose-50 font-medium">üåô –°–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º</button>
                        <button onclick="setOrderData('date', '–ó–∞–≤—Ç—Ä–∞'); nextStep(2)" class="w-full border border-rose-200 p-4 rounded-xl text-left hover:bg-rose-50 font-medium">‚òÄÔ∏è –ó–∞–≤—Ç—Ä–∞</button>
                        <input type="date" id="custom-date" onchange="setOrderData('date', this.value); nextStep(2)" class="w-full border border-gray-200 p-4 rounded-xl text-gray-600 focus:outline-rose-500">
                    </div>
                </div>

                <!-- Step 2: Delivery -->
                <div id="step-2" class="step-content hidden">
                    <h3 class="font-serif text-xl font-bold text-center mb-6">–ö–∞–∫ —É–¥–æ–±–Ω–µ–µ –ø–æ–ª—É—á–∏—Ç—å?</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="setOrderData('type', '–î–æ—Å—Ç–∞–≤–∫–∞'); nextStep(3)" class="border-2 border-rose-100 p-6 rounded-xl flex flex-col items-center gap-2 hover:border-rose-500 hover:bg-rose-50 transition-colors">
                            <i class="fas fa-truck text-2xl text-rose-500"></i>
                            <span class="font-bold text-sm">–î–æ—Å—Ç–∞–≤–∫–∞</span>
                        </button>
                        <button onclick="setOrderData('type', '–°–∞–º–æ–≤—ã–≤–æ–∑'); nextStep(3)" class="border-2 border-rose-100 p-6 rounded-xl flex flex-col items-center gap-2 hover:border-rose-500 hover:bg-rose-50 transition-colors">
                            <i class="fas fa-store text-2xl text-rose-500"></i>
                            <span class="font-bold text-sm">–°–∞–º–æ–≤—ã–≤–æ–∑</span>
                        </button>
                    </div>
                </div>

                <!-- Step 3: Contacts -->
                <div id="step-3" class="step-content hidden">
                    <h3 class="font-serif text-xl font-bold text-center mb-2">–ü–æ—á—Ç–∏ –≥–æ—Ç–æ–≤–æ!</h3>
                    <p class="text-center text-gray-500 text-sm mb-6">–§–ª–æ—Ä–∏—Å—Ç –Ω–∞–ø–∏—à–µ—Ç –≤–∞–º –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</p>
                    
                    <div class="space-y-4">
                        <input type="text" id="client-name" placeholder="–í–∞—à–µ –∏–º—è" class="w-full bg-gray-50 border-none p-4 rounded-xl focus:ring-2 focus:ring-rose-200 outline-none">
                        <input type="tel" id="client-phone" placeholder="+7 777 000 00 00" class="w-full bg-gray-50 border-none p-4 rounded-xl focus:ring-2 focus:ring-rose-200 outline-none">
                        
                        <button id="submit-btn" onclick="submitOrder()" class="w-full bg-green-600 text-white font-bold py-4 rounded-xl shadow-lg mt-4 flex justify-center items-center gap-2">
                            <span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</span> <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const products = [
            // –•–∏—Ç—ã
            { id: 1, cat: 'hits', name: '–ê–≤—Ç–æ—Ä—Å–∫–∏–π –±—É–∫–µ—Ç "–ù–µ–∂–Ω–æ—Å—Ç—å"', price: '25 000', img: 'https://images.unsplash.com/photo-1562690868-60bbe7293e94?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–ú–∏–∫—Å –∏–∑ –∫—É—Å—Ç–æ–≤—ã—Ö —Ä–æ–∑ –∏ —ç–≤–∫–∞–ª–∏–ø—Ç–∞. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Å–≤–∏–¥–∞–Ω–∏—è –∏–ª–∏ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è.' },
            { id: 2, cat: 'hits', name: '–ü–∏–æ–Ω–æ–≤–∏–¥–Ω–∞—è –ª—é–±–æ–≤—å', price: '32 000', img: 'https://images.unsplash.com/photo-1525310072745-f49212b5ac6d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–†–æ—Å–∫–æ—à–Ω—ã–µ –ø–∏–æ–Ω–æ–≤–∏–¥–Ω—ã–µ —Ä–æ–∑—ã —Å –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–º –∞—Ä–æ–º–∞—Ç–æ–º.' },
            
            // –ú–æ–Ω–æ
            { id: 3, cat: 'mono', name: '25 –ë–µ–ª—ã—Ö —Ä–æ–∑', price: '18 000', img: 'https://images.unsplash.com/photo-1597826368522-9f458885a039?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–ö–ª–∞—Å—Å–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞. –°–≤–µ–∂–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞ –∏–∑ –≠–∫–≤–∞–¥–æ—Ä–∞.' },
            { id: 4, cat: 'mono', name: '–û—Ö–∞–ø–∫–∞ –¢—é–ª—å–ø–∞–Ω–æ–≤', price: '15 000', img: 'https://images.unsplash.com/photo-1520013511871-337d80099d0e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–í–µ—Å–µ–Ω–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤ –ª—é–±–æ–π –¥–µ–Ω—å –≥–æ–¥–∞. 35 —à—Ç—É–∫.' },

            // –ê–≤—Ç–æ—Ä—Å–∫–∏–µ
            { id: 5, cat: 'author', name: '–ë—É–∫–µ—Ç "–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ"', price: '45 000', img: 'https://images.unsplash.com/photo-1563241527-3004b7be025b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–°–ª–æ–∂–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ü–≤–µ—Ç–∞–º–∏. –î–ª—è —Ç–µ—Ö, –∫–æ–≥–æ —Å–ª–æ–∂–Ω–æ —É–¥–∏–≤–∏—Ç—å.' },

            // –ö–æ—Ä–æ–±–∫–∏
            { id: 6, cat: 'box', name: '–®–ª—è–ø–Ω–∞—è –∫–æ—Ä–æ–±–∫–∞ S', price: '22 000', img: 'https://images.unsplash.com/photo-1589133887019-27083a216262?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', desc: '–°—Ç–∏–ª—å–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–∞ –æ–∞–∑–∏—Å–µ. –ù–µ —Ç—Ä–µ–±—É–µ—Ç –≤–∞–∑—ã, —É–¥–æ–±–Ω–æ –ø—Ä–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ.' }
        ];

        const catTitles = {
            'hits': 'üî• –•–∏—Ç—ã –Ω–µ–¥–µ–ª–∏',
            'mono': 'üåπ –ú–æ–Ω–æ–±—É–∫–µ—Ç—ã',
            'author': 'üé® –ê–≤—Ç–æ—Ä—Å–∫–∏–µ —Å–±–æ—Ä–∫–∏',
            'box': 'üéÅ –í –∫–æ—Ä–æ–±–∫–∞—Ö –∏ –∫–æ—Ä–∑–∏–Ω–∞—Ö'
        };

        // --- STATE ---
        let currentOrder = {
            product: null,
            date: '',
            type: '',
            name: '',
            phone: ''
        };

        // --- NAVIGATION ---
        function goHome() {
            document.getElementById('view-products').classList.add('hidden');
            document.getElementById('view-home').classList.remove('hidden');
            document.getElementById('backBtn').classList.add('hidden');
        }

        function showCategory(catKey) {
            document.getElementById('view-home').classList.add('hidden');
            document.getElementById('view-products').classList.remove('hidden');
            document.getElementById('backBtn').classList.remove('hidden');
            document.getElementById('category-title').innerText = catTitles[catKey];

            // Render products
            const container = document.getElementById('products-grid');
            container.innerHTML = '';
            
            const filtered = products.filter(p => p.cat === catKey);
            
            filtered.forEach(p => {
                const html = `
                    <div onclick="openProduct(${p.id})" class="bg-white rounded-2xl overflow-hidden card-shadow cursor-pointer active:scale-[0.99] transition-transform">
                        <div class="h-48 overflow-hidden relative">
                            <img src="${p.img}" class="w-full h-full object-cover">
                            <div class="absolute bottom-2 right-2 bg-white/90 backdrop-blur px-3 py-1 rounded-lg text-sm font-bold text-rose-900">
                                –æ—Ç ${p.price} ‚Ç∏
                            </div>
                        </div>
                        <div class="p-4">
                            <h3 class="font-serif font-bold text-lg mb-1">${p.name}</h3>
                            <button class="text-rose-500 font-medium text-sm">–ü–æ–¥—Ä–æ–±–Ω–µ–µ <i class="fas fa-arrow-right ml-1"></i></button>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        function openCustomOrder() {
            currentOrder.product = "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ (–ë—é–¥–∂–µ—Ç)";
            openOrderModal();
        }

        // --- PRODUCT MODAL ---
        function openProduct(id) {
            const product = products.find(p => p.id === id);
            currentOrder.product = product.name; // Save for order
            
            document.getElementById('modal-img').src = product.img;
            document.getElementById('modal-title').innerText = product.name;
            document.getElementById('modal-price').innerText = `~ ${product.price} ‚Ç∏`;
            document.getElementById('modal-desc').innerText = product.desc;
            
            document.getElementById('product-modal').classList.remove('hidden');
        }

        function closeModal(id) {
            document.getElementById(id).classList.add('hidden');
        }

        function startOrderProcess() {
            closeModal('product-modal');
            openOrderModal();
        }

        // --- ORDER FLOW ---
        function openOrderModal() {
            document.getElementById('order-modal').classList.remove('hidden');
            // Reset to step 1
            document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
            document.getElementById('step-1').classList.remove('hidden');
        }

        function nextStep(stepNum) {
            // Small delay for UX
            setTimeout(() => {
                document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
                document.getElementById(`step-${stepNum}`).classList.remove('hidden');
            }, 200);
        }

        function setOrderData(key, value) {
            currentOrder[key] = value;
        }

        // --- TELEGRAM SENDING ---
        // 1. –í–°–¢–ê–í–¨–¢–ï –¢–û–ö–ï–ù –ë–û–¢–ê –°–Æ–î–ê
        const BOT_TOKEN = "8446307985:AAFhTfPJApaYjRfM3vZtDtbvTJ-izd-Bf7k"; 
        // 2. –í–°–¢–ê–í–¨–¢–ï –í–ê–® ID –°–Æ–î–ê (—É–∑–Ω–∞—Ç—å –≤ @userinfobot)
        const CHAT_ID = "1025557118";

        async function submitOrder() {
            const name = document.getElementById('client-name').value;
            const phone = document.getElementById('client-phone').value;

            if(!name || !phone) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω");
                return;
            }

            const btn = document.getElementById('submit-btn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –û—Ç–ø—Ä–∞–≤–ª—è–µ–º...';

            const orderId = Math.floor(Math.random() * 1000) + 100; // Fake ID
            
            // Format for admin
            const msg = `üîî –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê #${orderId}\n\nüå∏ –¢–æ–≤–∞—Ä: ${currentOrder.product}\nüìÖ –î–∞—Ç–∞: ${currentOrder.date}\nüöö –¢–∏–ø: ${currentOrder.type}\nüë§ –ö–ª–∏–µ–Ω—Ç: ${name}\nüì± –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`;

            try {
                const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: msg
                    })
                });

                if (response.ok) {
                    btn.classList.replace('bg-green-600', 'bg-rose-500');
                    btn.innerHTML = '–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞! üå∏';
                    setTimeout(() => {
                        window.location.reload(); // Reset app
                    }, 2000);
                } else {
                    throw new Error('API Error');
                }
            } catch (e) {
                alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–∫–µ–Ω–∞.');
                btn.innerHTML = '–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞';
            }
        }

        // Telegram App Init
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
    </script>
</body>
</html>
